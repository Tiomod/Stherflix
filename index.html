<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SayCat - Seu Bot Confiável para Grupos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button onclick="toggleAudio()">Tocar/Pausar</button>
    <audio id="myAudio" src="musica.mp3" type="audio/mpeg"></audio>

    <header>
        <h1 class="led-text">Say Cat</h1>
        <h2>Seu Guardião Contra Números Estrangeiros e Conteúdo Inadequado</h2>
    </header>

    <form id="form-palpite">
        <label for="palpite">Digite seu palpite (1-20):</label>
        <input type="number" id="palpite" min="1" max="20" required>
        <button type="submit">Tentar a sorte</button>
    </form>
    <p id="resultado"></p>

    <script>
    // Gerar um número aleatório entre 1 e 20
    const numeroGanhador = Math.floor(Math.random() * 20) + 1;
    console.log("Número ganhador:", numeroGanhador);

    // Obter o formulário e os elementos relevantes
    const form = document.getElementById('form-palpite');
    const inputPalpite = document.getElementById('palpite');
    const resultado = document.getElementById('resultado');

    // Obter o IP do usuário (pode não ser 100% preciso)
    const getIP = () => {
      return new Promise((resolve) => {
        fetch('https://api.ipify.org?format=json')
          .then(response => response.json())
          .then(data => resolve(data.ip));
      });
    };

    // Objeto para armazenar as tentativas por IP
    const tentativas = {};

    form.addEventListener('submit', async (event) => {
      event.preventDefault();

      const palpite = inputPalpite.value;
      const ip = await getIP();

      // Verificar se o IP já tentou duas vezes
      if (tentativas[ip] >= 2) {
        resultado.textContent = "Você já tentou duas vezes.";
        return;
      }

      // Incrementar o número de tentativas para o IP
      tentativas[ip] = (tentativas[ip] || 0) + 1;

      // Comparar o palpite com o número ganhador
      if (palpite == numeroGanhador) {
        resultado.textContent = "Parabéns! Você acertou! Seu código de desconto é: DESCONTO50";
      } else {
        resultado.textContent = `Você errou. Tentativas restantes: ${2 - tentativas[ip]}`;
      }
    });
    </script>

    <footer>
        <p>&copy; 2023 SayCat - Todos os direitos reservados.</p>
    </footer>
</body>
</html>
